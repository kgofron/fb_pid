#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND

record(epid, "$(Sys)$(Dev)") {
  field(INP, "$(INP)")
  field(OUTL, "$(OUT) PP NMS")
  field(SCAN, "$(SCAN=Passive)")
  field(KP, "$(KP=0.1)")
  field(KI, "$(KI=0)")
  field(KD, "$(KD=0)")
  field(LOPR, "$(LOPR=0)")
  field(HOPR, "$(HOPR=1)")
  field(DRVL, "$(DRVL=0)")
  field(DRVH, "$(DRVH=1)")
  field(PREC, "$(PREC)")
  field(STPL, "0")
  field(FLNK, "$(Sys)$(Dev)_limits.VAL PP NMS")
  info(autosaveFields_pass0, "DESC INP OUTL SCAN KP KI KD LOPR HOPR DRVL DRVH PREC STPL")
}

record(ai, "$(Sys)$(Dev)in_") {
  field(VAL, 0)
}

record(ao, "$(Sys)$(Dev)out_") {
  field(VAL, 0)
}

record(transform, "$(Sys)$(Dev)_limits") {
  field(DESC, "PID limits")
  field(CMTA, "Low input")
  field(INPA, "$(DRVL=0)")
  field(CMTB, "High limit")
  field(INPB, "$(DRVH=0)")
  field(CMTO, "Low output")
  field(CLCO, "a")
  field(OUTO, "$(Sys)$(Dev).DRVL NPP NMS")
  field(CMTP, "High output")
  field(CLCP, "b")
  field(OUTP, "$(Sys)$(Dev).DRVH NPP NMS")
  field(PREC, "$(PREC)")
  info(autosaveFields_pass0, "DESC PREC")
}

record(transform, "$(Sys)$(Dev)_incalc") {
  field(DESC, "PID input calc")
  field(PREC, "$(PREC)")
  info(autosaveFields_pass0, "DESC PREC")
}

# These records are for tweaking the output (if the feedback is off)
record(ao, "$(Sys)$(Dev)OUT_tweak") {
  field(PREC, "3")
  info(autosaveFields_pass0, "VAL")
}

record(calcout, "$(Sys)$(Dev)OUT_tweak_down") {
  field(INPA, "$(Sys)$(Dev)OUT_tweak.VAL NPP NMS")
  field(INPB, "$(OUT) NPP NMS")
  field(CALC, "B-A")
  field(OUT, "$(OUT) PP NMS")
  info(autosaveFields_pass0, "VAL")
}

record(calcout, "$(Sys)$(Dev)OUT_tweak_up") {
  field(INPA, "$(Sys)$(Dev)OUT_tweak.VAL NPP NMS")
  field(INPB, "$(OUT) NPP NMS")
  field(CALC, "B+A")
  field(OUT, "$(OUT) PP NMS")
  info(autosaveFields_pass0, "VAL")
}

# These records are for tweaking the setpoint
record(ao, "$(Sys)$(Dev)SP_tweak") {
  field(PREC, "3")
  info(autosaveFields_pass0, "VAL")
}

record(calcout, "$(Sys)$(Dev)SP_tweak_down") {
  field(INPA, "$(Sys)$(Dev)SP_tweak.VAL NPP NMS")
  field(INPB, "$(Sys)$(Dev).VAL NPP NMS")
  field(CALC, "B-A")
  field(OUT, "$(Sys)$(Dev).VAL PP NMS")
  info(autosaveFields_pass0, "VAL")
}

record(calcout, "$(Sys)$(Dev)SP_tweak_up") {
  field(INPA, "$(Sys)$(Dev)SP_tweak.VAL NPP NMS")
  field(INPB, "$(Sys)$(Dev).VAL NPP NMS")
  field(CALC, "B+A")
  field(OUT, "$(Sys)$(Dev).VAL PP NMS")
  info(autosaveFields_pass0, "VAL")
}

# STOP logic
# This record turns off feedback
record(ao, "$(Sys)$(Dev)Stop") {
  field(VAL, "0")
  field(OUT, "$(Sys)$(Dev).FBON PP NMS")
  field(FLNK, "$(Sys)$(Dev)Stop2")
  info(autosaveFields_pass0, "VAL")
}

# This record turns off the output
record(ao, "$(Sys)$(Dev)Stop2") {
  field(VAL, "0.0")
  field(OUT, "$(OUT) PP NMS")
  info(autosaveFields_pass0, "VAL")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(Sys)$(Dev)",1040,282,0,0,"$(Sys)$(Dev)")
#! Field("$(Sys)$(Dev).INP",16777215,0,"$(Sys)$(Dev).INP")
#! Link("$(Sys)$(Dev).INP","$(Sys)$(Dev)/INP")
#! Field("$(Sys)$(Dev).OUTL",16777215,1,"$(Sys)$(Dev).OUTL")
#! Link("$(Sys)$(Dev).OUTL","$(Sys)$(Dev)/OUTL")
#! Field("$(Sys)$(Dev).FLNK",16777215,1,"$(Sys)$(Dev).FLNK")
#! Link("$(Sys)$(Dev).FLNK","$(Sys)$(Dev)/FLNK")
#! Field("$(Sys)$(Dev).DRVL",16777215,0,"$(Sys)$(Dev).DRVL")
#! Field("$(Sys)$(Dev).DRVH",16777215,0,"$(Sys)$(Dev).DRVH")
#! Field("$(Sys)$(Dev).VAL",16777215,0,"$(Sys)$(Dev).VAL")
#! Field("$(Sys)$(Dev).FBON",16777215,0,"$(Sys)$(Dev).FBON")
#! Connector("$(Sys)$(Dev)/OUTL",null,1260,560,16777215,"",2)
#! Connector("$(Sys)$(Dev)/INP",null,980,540,16777215,"",3)
#! Connector("$(Sys)$(Dev)/FLNK","$(Sys)$(Dev)/FLNK1",1400,505,16777215,"",0)
#! Connector("$(Sys)$(Dev)/FLNK1","$(Sys)$(Dev)/FLNK2",1020,440,16777215,"",0)
#! Connector("$(Sys)$(Dev)/FLNK2","$(Sys)$(Dev)_limits",640,434,16777215,"",0)
#! Record("$(Sys)$(Dev)_limits",680,316,0,0,"$(Sys)$(Dev)_limits")
#! Field("$(Sys)$(Dev)_limits.INPA",16777215,0,"$(Sys)$(Dev)_limits.INPA")
#! Link("$(Sys)$(Dev)_limits.INPA","$(Sys)$(Dev)_limits/INPA")
#! Field("$(Sys)$(Dev)_limits.INPB",16777215,0,"$(Sys)$(Dev)_limits.INPB")
#! Link("$(Sys)$(Dev)_limits.INPB","$(Sys)$(Dev)_limits/INPB")
#! Field("$(Sys)$(Dev)_limits.OUTO",16777215,1,"$(Sys)$(Dev)_limits.OUTO")
#! Link("$(Sys)$(Dev)_limits.OUTO","$(Sys)$(Dev).DRVL")
#! Field("$(Sys)$(Dev)_limits.OUTP",16777215,1,"$(Sys)$(Dev)_limits.OUTP")
#! Link("$(Sys)$(Dev)_limits.OUTP","$(Sys)$(Dev).DRVH")
#! Connector("$(Sys)$(Dev)_limits/INPB",null,620,560,16777215,"",3)
#! Connector("$(Sys)$(Dev)_limits/INPA",null,620,540,16777215,"",3)
#! Record("$(Sys)$(Dev)_incalc",320,415,0,0,"$(Sys)$(Dev)_incalc")
#! Record("$(Sys)$(Dev)OUT_tweak",300,129,0,0,"$(Sys)$(Dev)OUT_tweak")
#! Field("$(Sys)$(Dev)OUT_tweak.VAL",16777215,1,"$(Sys)$(Dev)OUT_tweak.VAL")
#! Record("$(Sys)$(Dev)OUT_tweak_down",720,87,0,0,"$(Sys)$(Dev)OUT_tweak_down")
#! Field("$(Sys)$(Dev)OUT_tweak_down.INPA",16777215,0,"$(Sys)$(Dev)OUT_tweak_down.INPA")
#! Link("$(Sys)$(Dev)OUT_tweak_down.INPA","$(Sys)$(Dev)OUT_tweak.VAL")
#! Field("$(Sys)$(Dev)OUT_tweak_down.INPB",16777215,0,"$(Sys)$(Dev)OUT_tweak_down.INPB")
#! Link("$(Sys)$(Dev)OUT_tweak_down.INPB","$(Sys)$(Dev)OUT_tweak_down/INPB")
#! Field("$(Sys)$(Dev)OUT_tweak_down.OUT",16777215,1,"$(Sys)$(Dev)OUT_tweak_down.OUT")
#! Link("$(Sys)$(Dev)OUT_tweak_down.OUT","$(Sys)$(Dev)OUT_tweak_down/OUT")
#! Connector("$(Sys)$(Dev)OUT_tweak_down/INPB",null,660,240,16777215,"",3)
#! Connector("$(Sys)$(Dev)OUT_tweak_down/OUT",null,940,260,16777215,"",2)
#! Record("$(Sys)$(Dev)OUT_tweak_up",720,227,0,0,"$(Sys)$(Dev)OUT_tweak_up")
#! Field("$(Sys)$(Dev)OUT_tweak_up.INPA",16777215,0,"$(Sys)$(Dev)OUT_tweak_up.INPA")
#! Link("$(Sys)$(Dev)OUT_tweak_up.INPA","$(Sys)$(Dev)OUT_tweak.VAL")
#! Field("$(Sys)$(Dev)OUT_tweak_up.INPB",16777215,0,"$(Sys)$(Dev)OUT_tweak_up.INPB")
#! Link("$(Sys)$(Dev)OUT_tweak_up.INPB","$(Sys)$(Dev)OUT_tweak_up/INPB")
#! Field("$(Sys)$(Dev)OUT_tweak_up.OUT",16777215,1,"$(Sys)$(Dev)OUT_tweak_up.OUT")
#! Link("$(Sys)$(Dev)OUT_tweak_up.OUT","$(Sys)$(Dev)OUT_tweak_up/OUT")
#! Connector("$(Sys)$(Dev)OUT_tweak_up/INPB",null,660,380,16777215,"",3)
#! Connector("$(Sys)$(Dev)OUT_tweak_up/OUT",null,940,400,16777215,"",2)
#! Record("$(Sys)$(Dev)SP_tweak",40,529,0,0,"$(Sys)$(Dev)SP_tweak")
#! Field("$(Sys)$(Dev)SP_tweak.VAL",16777215,1,"$(Sys)$(Dev)SP_tweak.VAL")
#! Record("$(Sys)$(Dev)SP_tweak_down",320,487,0,0,"$(Sys)$(Dev)SP_tweak_down")
#! Field("$(Sys)$(Dev)SP_tweak_down.INPA",16777215,0,"$(Sys)$(Dev)SP_tweak_down.INPA")
#! Link("$(Sys)$(Dev)SP_tweak_down.INPA","$(Sys)$(Dev)SP_tweak.VAL")
#! Field("$(Sys)$(Dev)SP_tweak_down.INPB",16777215,1,"$(Sys)$(Dev)SP_tweak_down.INPB")
#! Link("$(Sys)$(Dev)SP_tweak_down.INPB","$(Sys)$(Dev).VAL")
#! Field("$(Sys)$(Dev)SP_tweak_down.OUT",16777215,1,"$(Sys)$(Dev)SP_tweak_down.OUT")
#! Link("$(Sys)$(Dev)SP_tweak_down.OUT","$(Sys)$(Dev)SP_tweak_down/OUT")
#! Connector("$(Sys)$(Dev)SP_tweak_down/OUT","$(Sys)$(Dev).VAL",540,640,16777215,"",0)
#! Record("$(Sys)$(Dev)SP_tweak_up",320,627,0,0,"$(Sys)$(Dev)SP_tweak_up")
#! Field("$(Sys)$(Dev)SP_tweak_up.INPA",16777215,0,"$(Sys)$(Dev)SP_tweak_up.INPA")
#! Link("$(Sys)$(Dev)SP_tweak_up.INPA","$(Sys)$(Dev)SP_tweak.VAL")
#! Field("$(Sys)$(Dev)SP_tweak_up.INPB",16777215,1,"$(Sys)$(Dev)SP_tweak_up.INPB")
#! Link("$(Sys)$(Dev)SP_tweak_up.INPB","$(Sys)$(Dev)SP_tweak_up/INPB")
#! Field("$(Sys)$(Dev)SP_tweak_up.OUT",16777215,1,"$(Sys)$(Dev)SP_tweak_up.OUT")
#! Link("$(Sys)$(Dev)SP_tweak_up.OUT","$(Sys)$(Dev)SP_tweak_up/OUT")
#! Connector("$(Sys)$(Dev)SP_tweak_up/INPB","$(Sys)$(Dev).VAL",560,700,16777215,"",0)
#! Connector("$(Sys)$(Dev)SP_tweak_up/OUT","$(Sys)$(Dev).VAL",560,710,16777215,"",0)
#! Record("$(Sys)$(Dev)Stop",740,621,0,0,"$(Sys)$(Dev)Stop")
#! Field("$(Sys)$(Dev)Stop.OUT",16777215,1,"$(Sys)$(Dev)Stop.OUT")
#! Link("$(Sys)$(Dev)Stop.OUT","$(Sys)$(Dev)Stop/OUT")
#! Field("$(Sys)$(Dev)Stop.FLNK",16777215,1,"$(Sys)$(Dev)Stop.FLNK")
#! Link("$(Sys)$(Dev)Stop.FLNK","$(Sys)$(Dev)Stop/FLNK")
#! Connector("$(Sys)$(Dev)Stop/OUT","$(Sys)$(Dev).FBON",960,690,16777215,"",0)
#! Connector("$(Sys)$(Dev)Stop/FLNK","$(Sys)$(Dev)Stop/FLNK1",960,765,16777215,"",0)
#! Connector("$(Sys)$(Dev)Stop/FLNK1","$(Sys)$(Dev)Stop/FLNK2",830,780,16777215,"",0)
#! Connector("$(Sys)$(Dev)Stop/FLNK2","$(Sys)$(Dev)Stop2",700,798,16777215,"",0)
#! Record("$(Sys)$(Dev)Stop2",740,775,0,0,"$(Sys)$(Dev)Stop2")
#! Field("$(Sys)$(Dev)Stop2.OUT",16777215,1,"$(Sys)$(Dev)Stop2.OUT")
#! Link("$(Sys)$(Dev)Stop2.OUT","$(Sys)$(Dev)Stop2/OUT")
#! Connector("$(Sys)$(Dev)Stop2/OUT",null,980,880,16777215,"",2)
